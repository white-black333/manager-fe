<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button id='btn'>改变URL</button>

    <script>
        /* history
            DOM window 对象通过 history 对象提供了对浏览器的会话历史的访问.
              使用 back(), forward()和 go() 方法来完成在用户历史记录中向后和向前的跳转。
         */

        const btn = document.getElementById('btn');

        window.addEventListener('DOMContentLoaded', () => {
            console.log('path: ', location.pathname);
        })

        btn.addEventListener('click', (e) => {
            // 切换路由到user
            const state = { name: 'user' }
            //history.pushState() 方法向浏览器的会话历史栈增加了一个条目。
            //用法：pushState(state, unused, url)
            history.pushState(state, '', 'user')
            console.log(location.pathname);

        })

        /* 每当激活同一文档中不同的历史记录条目时，popstate 事件就会在对应的 window 对象上触发。
        如果当前处于激活状态的历史记录条目是由 history.pushState() 方法创建的或者是由 history.replaceState() 方法修改的，
        则 popstate 事件的 state 属性包含了这个历史记录条目的 state 对象的一个拷贝。 */
        window.onpopstate = (e) => {
            console.log(e.state, location.pathname);
            console.log(e);
        }
    </script>
</body>

</html>